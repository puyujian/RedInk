# 图片生成服务商配置
# 当前使用的服务商 (可选值: image_api, google_genai, openai, duckcoding, custom)
active_provider: image_api

# 服务商配置
providers:
  # Image API (默认图片生成服务)
  image_api:
    type: image_api
    api_key_env: IMAGE_API_KEY
    base_url: https://your-image-api-endpoint.com  # 填写你的图片服务地址
    model: nano-banana-2
    default_aspect_ratio: "3:4"
    supported_aspect_ratios:
      - "1:1"
      - "3:4"
      - "4:3"
      - "16:9"
      - "9:16"
    temperature: 1.0
    max_retries: 3
    image_size: "4K"

  # Google GenAI (官方)
  google_genai:
    type: google_genai
    api_key_env: GOOGLE_CLOUD_API_KEY  # 从环境变量读取
    model: gemini-3-pro-image-preview
    default_aspect_ratio: "3:4"  # 小红书标准比例
    supported_aspect_ratios:
      - "1:1"
      - "3:4"
      - "4:3"
      - "16:9"
      - "9:16"
    temperature: 1.0
    max_retries: 5

  # OpenAI (官方)
  openai:
    type: openai_compatible
    api_key_env: OPENAI_API_KEY
    base_url: https://api.openai.com
    model: dall-e-3
    endpoint_type: images  # images 或 chat
    default_size: "1024x1024"
    supported_sizes:
      - "1024x1024"
      - "1792x1024"
      - "1024x1792"
    quality: hd  # standard 或 hd
    max_retries: 5

  # DuckCoding (第三方服务商示例)
  duckcoding:
    type: openai_compatible
    api_key_env: DUCKCODING_API_KEY
    base_url: https://jp.duckcoding.com
    model: gemini-3-pro-image-preview
    endpoint_type: images  # 使用 images API
    default_size: "1024x1024"
    supported_sizes:
      - "1024x1024"
      - "2048x2048"
      - "4096x4096"
      - "1024x1792"
      - "1792x1024"
    max_retries: 5

  # 自定义服务商模板
  custom:
    type: openai_compatible
    api_key_env: CUSTOM_API_KEY
    base_url: https://your-api-endpoint.com
    model: your-model-name
    endpoint_type: images
    default_size: "1024x1024"
    supported_sizes:
      - "1024x1024"
    max_retries: 3

  # Nano-Banana-Pro（支持流式响应）
  nano_banana:
    type: openai_compatible
    api_key_env: NANO_BANANA_API_KEY
    base_url: https://your-nano-banana-endpoint.com
    model: Nano-Banana-Pro
    endpoint_type: chat  # 使用 chat 端点
    default_size: "1024x1024"
    supported_sizes:
      - "1024x1024"
      - "1024x1792"
      - "1792x1024"
    max_retries: 5
    # 流式响应配置（推荐启用以避免超时）
    chat_streaming: true  # 启用流式响应，默认为 true
    chat_stream_connect_timeout: 30  # 流式连接超时时间（秒），默认 30
    chat_stream_read_timeout: 600  # 流式读取超时时间（秒），默认为 request_timeout * 2
    chat_request_timeout: 180  # 非流式请求超时时间（秒），默认 180

# 小红书图片配置
xiaohongshu:
  # 默认宽高比 (用于Google GenAI)
  aspect_ratio: "3:4"

  # 默认尺寸 (用于OpenAI兼容接口)
  # 小红书推荐: 1080x1440, 2160x2880
  # 最接近的标准尺寸: 1024x1365 或 1024x1792
  size: "1024x1792"  # 接近 3:4 比例

  # 提示词模板路径
  prompt_template: backend/prompts/image_prompt.txt
